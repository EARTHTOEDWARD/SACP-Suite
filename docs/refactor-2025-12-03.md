# Refactor Record â€” 2025-12-03

Summary of changes to modularize the Dash UI and add chemistry routing.

## UI shell and pages
- Replaced monolithic `src/sacp_suite/ui/app.py` with a thin shell that renders pages via a registry, adds shared stores, and keeps `main()`/`server` stable.
- Added page registry with defensive bootstrap (`src/sacp_suite/ui/pages/__init__.py`) and shared helpers (`src/sacp_suite/ui/pages/common.py`).
- Split pages into individual modules under `src/sacp_suite/ui/pages/` (home, simulator, sheaf, attractorhedron, fractal_llm, cognition, dcrc, self_tuning, bcp, abtc, datasets, chemistry). Layouts and callbacks moved over with original IDs to preserve behavior.
- Updated navbar styling for spacing/legibility in `src/sacp_suite/ui/assets/style.css`.

## Chemistry
- Added FastAPI router `src/sacp_suite/api/v1/chemistry.py` (lazy imports heavy ADR code, returns time-series + metadata) and included it in `src/sacp_suite/api/main.py` under `/api/v1/chemistry`.
- Chemistry UI page (`src/sacp_suite/ui/pages/chemistry.py`) calls the API (no direct numerics imports) and plots results.

## Entrypoints
- Added `src/sacp_suite/__main__.py` and console script `sacp-suite` in `pyproject.toml` for launching the UI.

## Developer guidance
- Added `docs/frontend-module-guide.md` with instructions for adding new pages/modules, wiring callbacks, styling, and backend router patterns.

## Notes
- Shared trajectory caching moved to in-process helpers (`get_shared_traj`/`set_shared_traj`) instead of the Dash server attribute.
- APIs/UI verified to start locally: API on 127.0.0.1:8000, UI on 127.0.0.1:8050.
